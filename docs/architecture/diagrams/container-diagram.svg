<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900">
  <defs>
    <style>
      .app-box { fill: #1168bd; stroke: #0e4884; stroke-width: 2; }
      .db-box { fill: #2b7bb9; stroke: #1a4d7a; stroke-width: 2; }
      .external-box { fill: #999; stroke: #666; stroke-width: 2; }
      .obs-box { stroke: #666; stroke-width: 2; }
      .boundary { fill: none; stroke: #ccc; stroke-width: 2; stroke-dasharray: 5,5; }
      .text-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: white; }
      .text-desc { font-family: Arial, sans-serif; font-size: 10px; fill: white; }
      .arrow { stroke: #666; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
      .arrow-text { font-family: Arial, sans-serif; font-size: 10px; fill: #333; }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#666" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="700" y="30" font-family="Arial" font-size="22" font-weight="bold" text-anchor="middle" fill="#333">
    C4 Container Diagram â€” Payment System
  </text>
  
  <!-- User -->
  <rect fill="#08427b" stroke="#052e56" stroke-width="2" x="50" y="200" width="140" height="70" rx="8"/>
  <text class="text-title" x="120" y="230" text-anchor="middle">ðŸ‘¤ User</text>
  <text class="text-desc" x="120" y="250" text-anchor="middle">End user</text>
  
  <!-- Individuals API Boundary -->
  <rect class="boundary" x="250" y="100" width="280" height="180"/>
  <text font-family="Arial" font-size="12" font-weight="bold" x="260" y="120" fill="#666">Individuals API</text>
  
  <!-- Individuals API App -->
  <rect class="app-box" x="270" y="140" width="240" height="110" rx="6"/>
  <text class="text-title" x="390" y="165" text-anchor="middle">Individuals API</text>
  <text class="text-desc" x="390" y="180" text-anchor="middle">Spring Boot WebFlux</text>
  <text class="text-desc" x="390" y="195" text-anchor="middle">Port: 8081</text>
  <text class="text-desc" x="390" y="210" text-anchor="middle">Orchestration & Auth</text>
  
  <!-- Person Service Boundary -->
  <rect class="boundary" x="600" y="100" width="320" height="300"/>
  <text font-family="Arial" font-size="12" font-weight="bold" x="610" y="120" fill="#666">Person Service</text>
  
  <!-- Person Service App -->
  <rect class="app-box" x="620" y="140" width="280" height="100" rx="6"/>
  <text class="text-title" x="760" y="165" text-anchor="middle">Person Service</text>
  <text class="text-desc" x="760" y="180" text-anchor="middle">Spring Boot Web</text>
  <text class="text-desc" x="760" y="195" text-anchor="middle">Port: 8082</text>
  <text class="text-desc" x="760" y="210" text-anchor="middle">JPA + Envers Audit</text>
  
  <!-- Person DB -->
  <ellipse class="db-box" cx="760" cy="320" rx="130" ry="50"/>
  <text class="text-title" x="760" y="315" text-anchor="middle">Person Database</text>
  <text class="text-desc" x="760" y="330" text-anchor="middle">PostgreSQL</text>
  <text class="text-desc" x="760" y="345" text-anchor="middle">person schema</text>
  
  <!-- Keycloak Boundary -->
  <rect class="boundary" x="1000" y="100" width="300" height="300"/>
  <text font-family="Arial" font-size="12" font-weight="bold" x="1010" y="120" fill="#666">Keycloak</text>
  
  <!-- Keycloak App -->
  <rect class="external-box" x="1020" y="140" width="260" height="100" rx="6"/>
  <text class="text-title" x="1150" y="165" text-anchor="middle">Keycloak Server</text>
  <text class="text-desc" x="1150" y="180" text-anchor="middle">Keycloak 26.2</text>
  <text class="text-desc" x="1150" y="195" text-anchor="middle">Port: 8080</text>
  <text class="text-desc" x="1150" y="210" text-anchor="middle">OAuth2/OIDC Provider</text>
  
  <!-- Keycloak DB -->
  <ellipse fill="#777" stroke="#555" stroke-width="2" cx="1150" cy="320" rx="120" ry="50"/>
  <text class="text-title" x="1150" y="315" text-anchor="middle">Keycloak DB</text>
  <text class="text-desc" x="1150" y="330" text-anchor="middle">PostgreSQL</text>
  <text class="text-desc" x="1150" y="345" text-anchor="middle">realms, users</text>
  
  <!-- Observability Stack -->
  <rect fill="#f5f5f5" stroke="#999" stroke-width="2" x="250" y="450" width="670" height="350" rx="8"/>
  <text font-family="Arial" font-size="14" font-weight="bold" x="585" y="480" text-anchor="middle" fill="#333">
    Observability Stack
  </text>
  
  <!-- Prometheus -->
  <rect fill="#e85d3a" stroke="#c44d2a" stroke-width="2" x="280" y="510" width="120" height="70" rx="6"/>
  <text class="text-title" x="340" y="535" text-anchor="middle">Prometheus</text>
  <text class="text-desc" x="340" y="550" text-anchor="middle">Port: 9090</text>
  <text class="text-desc" x="340" y="565" text-anchor="middle">Metrics</text>
  
  <!-- Grafana -->
  <rect fill="#ff8c42" stroke="#e67a32" stroke-width="2" x="430" y="510" width="120" height="70" rx="6"/>
  <text class="text-title" x="490" y="535" text-anchor="middle">Grafana</text>
  <text class="text-desc" x="490" y="550" text-anchor="middle">Port: 3000</text>
  <text class="text-desc" x="490" y="565" text-anchor="middle">Visualization</text>
  
  <!-- Loki -->
  <rect fill="#00d4aa" stroke="#00b48a" stroke-width="2" x="580" y="510" width="120" height="70" rx="6"/>
  <text class="text-title" x="640" y="535" text-anchor="middle">Loki</text>
  <text class="text-desc" x="640" y="550" text-anchor="middle">Port: 3100</text>
  <text class="text-desc" x="640" y="565" text-anchor="middle">Log Storage</text>
  
  <!-- Tempo -->
  <rect fill="#ed6a5e" stroke="#cd5a4e" stroke-width="2" x="730" y="510" width="120" height="70" rx="6"/>
  <text class="text-title" x="790" y="535" text-anchor="middle">Tempo</text>
  <text class="text-desc" x="790" y="550" text-anchor="middle">Port: 3200</text>
  <text class="text-desc" x="790" y="565" text-anchor="middle">Tracing</text>
  
  <!-- Promtail -->
  <rect fill="#5ac8c8" stroke="#4ab8b8" stroke-width="2" x="430" y="650" width="120" height="70" rx="6"/>
  <text class="text-title" x="490" y="675" text-anchor="middle">Promtail</text>
  <text class="text-desc" x="490" y="690" text-anchor="middle">Log Shipper</text>
  
  <!-- Nexus -->
  <rect fill="#00a78e" stroke="#008776" stroke-width="2" x="1000" y="500" width="180" height="80" rx="6"/>
  <text class="text-title" x="1090" y="530" text-anchor="middle">ðŸ“¦ Nexus OSS</text>
  <text class="text-desc" x="1090" y="545" text-anchor="middle">Port: 8091</text>
  <text class="text-desc" x="1090" y="560" text-anchor="middle">Maven Repository</text>
  
  <!-- Arrows -->
  <!-- User -> IndAPI -->
  <path class="arrow" d="M 190 235 L 270 195"/>
  <text class="arrow-text" x="210" y="210">POST /registration</text>
  
  <!-- IndAPI -> PersonSvc -->
  <path class="arrow" d="M 510 195 L 620 190"/>
  <text class="arrow-text" x="540" y="185">POST /persons</text>
  
  <!-- IndAPI -> Keycloak -->
  <path class="arrow" d="M 510 175 L 1020 190"/>
  <text class="arrow-text" x="720" y="165">Admin API / Token</text>
  
  <!-- PersonSvc -> PersonDB -->
  <path class="arrow" d="M 760 240 L 760 270"/>
  <text class="arrow-text" x="770" y="260">JPA/JDBC</text>
  
  <!-- Keycloak -> KeycloakDB -->
  <path class="arrow" d="M 1150 240 L 1150 270"/>
  <text class="arrow-text" x="1160" y="260">JDBC</text>
  
  <!-- IndAPI -> Prometheus -->
  <path class="arrow" d="M 320 250 L 320 510"/>
  <text class="arrow-text" x="330" y="380">Metrics</text>
  
  <!-- PersonSvc -> Prometheus -->
  <path class="arrow" d="M 700 240 L 360 510"/>
  <text class="arrow-text" x="520" y="380">Metrics</text>
  
  <!-- IndAPI -> Tempo -->
  <path class="arrow" d="M 450 250 L 760 510"/>
  <text class="arrow-text" x="580" y="380">OTLP Traces</text>
  
  <!-- PersonSvc -> Tempo -->
  <path class="arrow" d="M 760 240 L 790 510"/>
  <text class="arrow-text" x="770" y="380">OTLP Traces</text>
  
  <!-- Promtail -> Loki -->
  <path class="arrow" d="M 550 650 L 620 580"/>
  <text class="arrow-text" x="570" y="610">Logs</text>
  
  <!-- Grafana -> Prometheus -->
  <path class="arrow" d="M 430 545 L 400 545"/>
  
  <!-- Grafana -> Loki -->
  <path class="arrow" d="M 550 545 L 580 545"/>
  
  <!-- Grafana -> Tempo -->
  <path class="arrow" d="M 550 550 L 730 550"/>
  
  <!-- IndAPI -> Nexus -->
  <path class="arrow" d="M 510 220 L 1000 540"/>
  <text class="arrow-text" x="720" y="370">Maven fetch</text>
</svg>
